@model DepartmentDto;

<!-- Button trigger modal-->
<!-- Modal-->
<form id="addDepartmentForm" asp-controller="Admin" asp-action="AddEditDepartment" method="post" data-ajax="true" data-ajax-method="post" data-ajax-update="#resultMessage" data-ajax-success="onDepartmentAdded">
    <div class="modal-content" style="border-radius: 15px; border: none; box-shadow: 0 10px 30px rgba(0,0,0,0.15); max-width: 500px; margin: 0 auto;">
        <div class="modal-header" style="background: #29504D !important; color: white; border-radius: 15px 15px 0 0; border: none; padding: 1.5rem 1.5rem 1rem; text-align: center; position: relative; display: flex; align-items: center; justify-content: center;">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <div style="width: 40px; height: 40px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 3px solid rgba(255,255,255,0.3);">
                    <i class="fas fa-building" style="font-size: 1rem; color: white;"></i>
                </div>
                <h4 class="modal-title mb-0" id="exampleModalLabel" style="color: white !important; font-size: 1.3rem; margin: 0;">بيانات القسم</h4>
            </div>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="position: absolute; top: 10px; right: 15px; color: white; opacity: 0.8; font-size: 24px; background: none; border: none;">
                <i aria-hidden="true" class="ki ki-close"></i>
            </button>
        </div>
        <div class="modal-body" style="padding: 1.5rem;">
            <input type="hidden" asp-for="ActionType" />
            @if (Model != null && Model.ActionType != null)
            {
                @if (Model.ActionType == (int)ActionTypeEnum.Update)
                {
                    <input type="hidden" asp-for="Id" />
                }
            }
            <div class="text-center pb-2" id="errorAdd" style="font-size: 14px; display: none;">
                <div class="text-danger">
                </div>
            </div>

            <!--begin::Group-->
            <div class="form-group mb-3">
                <label asp-for="Name" class="form-label" style="color: #495057; font-weight: 600; margin-bottom: 0.5rem; font-size: 14px;">اسم القسم *</label>
                <input class="form-control" asp-for="Name" type="text" required 
                       oninvalid="this.setCustomValidity('حقل اسم القسم مطلوب')" 
                       oninput="this.setCustomValidity('')" 
                       style="border-radius: 8px; border: 2px solid #e9ecef; padding: 0.75rem; font-size: 14px; height: 45px;" />
                <span asp-validation-for="Name" class="alert-danger"></span>
            </div>
            <!--end::Group-->

            <!--begin::Group-->
            <div class="form-group mb-3">
                <label asp-for="Description" class="form-label" style="color: #495057; font-weight: 600; margin-bottom: 0.5rem; font-size: 14px;">الوصف</label>
                <textarea class="form-control" asp-for="Description" rows="2" 
                          style="border-radius: 8px; border: 2px solid #e9ecef; padding: 0.75rem; resize: vertical; font-size: 14px; min-height: 60px;"></textarea>
                <span asp-validation-for="Description" class="alert-danger"></span>
            </div>
            <!--end::Group-->

            <!--begin::Group-->
            <div class="form-group mb-3">
                <label asp-for="DepartmentTypeId" class="form-label" style="color: #495057; font-weight: 600; margin-bottom: 0.5rem; font-size: 14px;">نوع القسم *</label>
                <select asp-for="DepartmentTypeId" class="form-control" asp-items="@ViewBag.departmentTypes" required 
                        oninvalid="this.setCustomValidity('حقل نوع القسم مطلوب')" 
                        oninput="this.setCustomValidity('')"
                        style="border-radius: 8px; border: 2px solid #e9ecef; padding: 0.75rem; font-size: 14px; height: 45px; direction: rtl;">
                    <option value="">اختر من القائمة</option>
                </select>
                <span asp-validation-for="DepartmentTypeId" class="alert-danger"></span>
            </div>
            <!--end::Group-->

            <!--begin::Group-->
            <div class="form-group mb-3">
                <label asp-for="IsDeleted" class="form-label" style="color: #495057; font-weight: 600; margin-bottom: 0.5rem; font-size: 14px;">حالة الحذف</label>
                <select asp-for="IsDeleted" class="form-control" 
                        style="border-radius: 8px; border: 2px solid #e9ecef; padding: 0.75rem; font-size: 14px; height: 45px; direction: rtl;">
                    <option value="">اختر من القائمة</option>
                    <option value="true">نعم</option>
                    <option value="false">لا</option>
                </select>
                <span asp-validation-for="IsDeleted" class="alert-danger"></span>
            </div>
            <!--end::Group-->
        </div>
        <div class="modal-footer" style="text-align: right; direction: ltr; border: none; padding: 1rem 1.5rem 1.5rem;">
            <button type="submit" class="btn font-weight-bolder" style="background: #29504D !important; color: white !important; border: none; border-radius: 6px; padding: 0.5rem 1.5rem; margin-right: 0.5rem;">
                <i class="fas fa-save me-1"></i>
                حفظ
            </button>
            <button type="button" class="btn font-weight-bold" data-dismiss="modal" style="background: #dc3545 !important; color: white !important; border: none; border-radius: 6px; padding: 0.5rem 1.5rem;">
                <i class="fas fa-times me-1"></i>
                رجوع
            </button>
        </div>
    </div>
</form>

<style>
    @@keyframes float {
        0%, 100% {
            transform: translateY(0px) rotate(0deg);
        }

        50% {
            transform: translateY(-20px) rotate(180deg);
        }
    }

    /* Validation styling */
    .form-control:invalid {
        border-color: #dc3545;
        box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
    }
    
    .form-control:valid {
        border-color: #29504D;
        box-shadow: 0 0 0 0.2rem rgba(41, 80, 77, 0.25);
    }
    
    .form-control.is-invalid {
        border-color: #dc3545;
        box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
    }
    
    /* Custom validation messages */
    .alert-danger {
        color: #dc3545;
        font-size: 0.875rem;
        margin-top: 0.25rem;
    }
</style>